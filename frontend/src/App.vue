<script setup lang="ts">
import { ref, reactive } from 'vue'
import { 
  Monitor, 
  Iphone, 
  Platform, 
  Message, 
  Promotion,
  Notebook
} from '@element-plus/icons-vue'
import type { FormInstance, FormRules } from 'element-plus'
import { ElMessage } from 'element-plus'

const scrollTo = (id: string) => {
  const el = document.getElementById(id)
  if (el) {
    el.scrollIntoView({ behavior: 'smooth' })
  }
}

const services = [
  { 
    title: 'Web ç³»ç»Ÿå¼€å‘', 
    desc: 'ä¼ä¸šå®˜ç½‘ã€åå°ç®¡ç†ç³»ç»Ÿã€SaaS å¹³å°ã€‚æŠ€æœ¯æ ˆï¼šSpringBoot, Vue3, React', 
    icon: Monitor,
    price: 'Â¥500 èµ·'
  },
  { 
    title: 'ç§»åŠ¨ç«¯å¼€å‘', 
    desc: 'å¾®ä¿¡å°ç¨‹åºã€H5 åº”ç”¨ã€è·¨ç«¯ APP å¼€å‘ã€‚æŠ€æœ¯æ ˆï¼šUni-app, Taro', 
    icon: Iphone,
    price: 'Â¥800 èµ·'
  },
  { 
    title: 'æ¯•ä¸šè®¾è®¡è¾…å¯¼', 
    desc: 'ä»é€‰é¢˜å¼€é¢˜åˆ°ç­”è¾©å…¨æµç¨‹æŒ‡å¯¼ï¼Œæºç è®²è§£ï¼Œæ–‡æ¡£æ’°å†™è¾…åŠ©', 
    icon: Notebook,
    price: 'å’¨è¯¢æŠ¥ä»·'
  },
]

const projects = [
  { 
    title: 'æ ¡å›­æ™ºæ…§ç‚¹é¤ç³»ç»Ÿ', 
    desc: 'åŸºäº SpringBoot + Vue çš„å‰åç«¯åˆ†ç¦»ç‚¹é¤å¹³å°ï¼ŒåŒ…å«ç”¨æˆ·ç«¯ã€å•†æˆ·ç«¯å’Œéª‘æ‰‹ç«¯ã€‚', 
    tags: ['SpringBoot', 'Vue3', 'MySQL'],
    bg: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'
  },
  { 
    title: 'ä¸ªäººè´¢åŠ¡å¯è§†åŒ–å¤§å±', 
    desc: 'Python æ•°æ®åˆ†æé¡¹ç›®ï¼Œé€šè¿‡ Echarts å®ç°å¤šç»´åº¦è´¢åŠ¡æ•°æ®å¯è§†åŒ–å±•ç¤ºã€‚', 
    tags: ['Python', 'Echarts', 'DataAnalysis'],
    bg: 'linear-gradient(135deg, #2af598 0%, #009efd 100%)'
  },
  { 
    title: 'äºŒæ‰‹å›¾ä¹¦äº¤æ˜“å°ç¨‹åº', 
    desc: 'æ ¡å›­äºŒæ‰‹ä¹¦å¾ªç¯åˆ©ç”¨å¹³å°ï¼Œæ”¯æŒæ‰«ç å‘å¸ƒã€å³æ—¶é€šè®¯ã€çº¿ä¸‹äº¤æ˜“ã€‚', 
    tags: ['Uni-app', 'Node.js', 'MongoDB'],
    bg: 'linear-gradient(135deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%)'
  }
]

// Contact Form
const formRef = ref<FormInstance>()
const form = reactive({
  name: '',
  contact: '',
  content: ''
})

const rules = reactive<FormRules>({
  name: [{ required: true, message: 'è¯·è¾“å…¥æ‚¨çš„ç§°å‘¼', trigger: 'blur' }],
  contact: [{ required: true, message: 'è¯·è¾“å…¥è”ç³»æ–¹å¼ï¼ˆå¾®ä¿¡/QQ/æ‰‹æœºï¼‰', trigger: 'blur' }],
  content: [{ required: true, message: 'è¯·è¾“å…¥å’¨è¯¢å†…å®¹', trigger: 'blur' }],
})

const submitForm = async (formEl: FormInstance | undefined) => {
  if (!formEl) return
  await formEl.validate((valid, fields) => {
    if (valid) {
      ElMessage.success('æ¶ˆæ¯å·²å‘é€ï¼Œæˆ‘ä¼šé€šè¿‡å¾®ä¿¡/QQè”ç³»æ‚¨ï¼')
      formEl.resetFields()
    } else {
      console.log('error submit!', fields)
    }
  })
}
</script>

<template>
  <div class="main-container">
    <!-- Navbar -->
    <nav class="navbar">
      <div class="logo">YAO.DEV</div>
      <div class="nav-links">
        <a @click="scrollTo('home')">é¦–é¡µ</a>
        <a @click="scrollTo('services')">æœåŠ¡</a>
        <a @click="scrollTo('portfolio')">ä½œå“</a>
        <a @click="scrollTo('contact')">è”ç³»</a>
      </div>
      <el-button type="primary" round class="contact-btn" @click="scrollTo('contact')">
        ç«‹å³å’¨è¯¢
      </el-button>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero">
      <div class="hero-content">
        <h1 class="hero-title">
          è®©æƒ³æ³•å˜æˆ <span class="highlight">ç°å®</span>
        </h1>
        <p class="hero-subtitle">
          ä¸“æ³¨å¤§å­¦ç”Ÿæ¯•ä¸šè®¾è®¡è¾…å¯¼ | å…¨æ ˆå¼€å‘ | æŠ€æœ¯å’¨è¯¢
        </p>
        <div class="hero-badges">
          <el-tag effect="dark" round>âš¡ï¸ å¿«é€Ÿäº¤ä»˜</el-tag>
          <el-tag effect="dark" type="success" round>ğŸ›¡ï¸ å”®åä¿éšœ</el-tag>
          <el-tag effect="dark" type="warning" round>ğŸ“ æºç è®²è§£</el-tag>
        </div>
        <div class="hero-actions">
          <el-button type="primary" size="large" :icon="Promotion" @click="scrollTo('portfolio')">
            æŸ¥çœ‹ä½œå“
          </el-button>
          <el-button size="large" :icon="Message" @click="scrollTo('contact')">
            è”ç³»æˆ‘
          </el-button>
        </div>
      </div>
      <div class="hero-bg-glow"></div>
    </section>

    <!-- Services -->
    <section id="services" class="section">
      <h2 class="section-title">æˆ‘çš„æœåŠ¡</h2>
      <div class="services-grid">
        <div v-for="s in services" :key="s.title" class="service-card">
          <div class="icon-box">
            <component :is="s.icon" />
          </div>
          <h3>{{ s.title }}</h3>
          <p>{{ s.desc }}</p>
          <div class="price">{{ s.price }}</div>
        </div>
      </div>
    </section>

    <!-- Portfolio -->
    <section id="portfolio" class="section">
      <h2 class="section-title">ç²¾é€‰ä½œå“</h2>
      <div class="portfolio-grid">
        <div v-for="p in projects" :key="p.title" class="project-card">
          <div class="project-preview" :style="{ background: p.bg }">
            <!-- Optional: Replace with img tag later -->
            <div class="preview-overlay">
              <Platform style="width: 48px; height: 48px; color: white; opacity: 0.8;" />
            </div>
          </div>
          <div class="project-info">
            <h3>{{ p.title }}</h3>
            <p>{{ p.desc }}</p>
            <div class="tags">
              <el-tag v-for="t in p.tags" :key="t" size="small" effect="plain">{{ t }}</el-tag>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="section">
      <h2 class="section-title">è”ç³»æˆ‘</h2>
      <div class="contact-container">
        <div class="contact-info">
          <div class="info-item">
            <h3>ğŸ¤ åˆä½œæµç¨‹</h3>
            <el-timeline>
              <el-timeline-item timestamp="Step 1" placement="top">
                <h4>éœ€æ±‚æ²Ÿé€š</h4>
                <p>ç¡®è®¤åŠŸèƒ½éœ€æ±‚ã€æŠ€æœ¯æ ˆã€äº¤ä»˜æ—¶é—´</p>
              </el-timeline-item>
              <el-timeline-item timestamp="Step 2" placement="top">
                <h4>å¼€å‘å®ç°</h4>
                <p>å®šæœŸæ±‡æŠ¥è¿›åº¦ï¼ŒæŸ¥çœ‹é˜¶æ®µæ€§æˆæœ</p>
              </el-timeline-item>
              <el-timeline-item timestamp="Step 3" placement="top">
                <h4>äº¤ä»˜éªŒæ”¶</h4>
                <p>æºç äº¤ä»˜ã€éƒ¨ç½²è°ƒè¯•ã€è¿œç¨‹ååŠ©</p>
              </el-timeline-item>
            </el-timeline>
          </div>
        </div>
        
        <div class="contact-form-card">
          <h3>å¿«é€Ÿç•™è¨€</h3>
          <el-form ref="formRef" :model="form" :rules="rules" status-icon label-position="top">
            <el-form-item label="æ‚¨çš„ç§°å‘¼" prop="name">
              <el-input v-model="form.name" placeholder="åŒå­¦ / å…ˆç”Ÿ / å¥³å£«" />
            </el-form-item>
            <el-form-item label="è”ç³»æ–¹å¼" prop="contact">
              <el-input v-model="form.contact" placeholder="å¾®ä¿¡ ID æˆ– QQ å·" />
            </el-form-item>
            <el-form-item label="éœ€æ±‚æè¿°" prop="content">
              <el-input v-model="form.content" type="textarea" :rows="4" placeholder="ç®€è¦æè¿°æ‚¨çš„éœ€æ±‚..." />
            </el-form-item>
            <el-form-item>
              <el-button type="primary" style="width: 100%" @click="submitForm(formRef)">
                å‘é€æ¶ˆæ¯
              </el-button>
            </el-form-item>
          </el-form>
        </div>
      </div>
    </section>

    <footer class="footer">
      <p>Â© 2026 YAO.DEV | ä¸“æ³¨äºé«˜è´¨é‡æ¯•ä¸šè®¾è®¡ä¸è½¯ä»¶å¼€å‘</p>
    </footer>
  </div>
</template>

<style scoped lang="scss">
.main-container {
  width: 100%;
  min-height: 100vh;
  background-color: #0d1117;
  color: #e6edf3;
  font-family: 'Inter', sans-serif;
  overflow-x: hidden;
}

.navbar {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 40px;
  background: rgba(13, 17, 23, 0.8);
  backdrop-filter: blur(12px);
  z-index: 100;
  border-bottom: 1px solid rgba(255,255,255,0.05);
  box-sizing: border-box;

  .logo {
    font-weight: 800;
    font-size: 1.5rem;
    background: linear-gradient(120deg, #409eff, #a0cfff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .nav-links {
    display: none;
    gap: 32px;
    @media (min-width: 768px) {
      display: flex;
    }

    a {
      cursor: pointer;
      font-size: 1rem;
      color: #8b949e;
      transition: color 0.3s;
      &:hover {
        color: #fff;
      }
    }
  }
}

.hero {
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  position: relative;
  padding: 0 20px;

  .hero-content {
    z-index: 2;
    max-width: 800px;
  }

  .hero-title {
    font-size: 3.5rem;
    font-weight: 800;
    margin-bottom: 1.5rem;
    line-height: 1.2;
    
    .highlight {
      color: #409eff;
      position: relative;
      &::after {
        content: '';
        position: absolute;
        bottom: 5px;
        left: 0;
        width: 100%;
        height: 8px;
        background: rgba(64, 158, 255, 0.3);
        z-index: -1;
      }
    }
  }

  .hero-subtitle {
    font-size: 1.25rem;
    color: #8b949e;
    margin-bottom: 2rem;
  }

  .hero-badges {
    display: flex;
    justify-content: center;
    gap: 12px;
    margin-bottom: 3rem;
  }

  .hero-actions {
    display: flex;
    gap: 16px;
    justify-content: center;
  }

  .hero-bg-glow {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 600px;
    height: 600px;
    background: radial-gradient(circle, rgba(64, 158, 255, 0.15) 0%, transparent 70%);
    z-index: 1;
    pointer-events: none;
  }
}

.section {
  padding: 80px 20px;
  max-width: 1200px;
  margin: 0 auto;

  .section-title {
    font-size: 2.5rem;
    text-align: center;
    margin-bottom: 60px;
    font-weight: 700;
  }
}

.services-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 30px;

  .service-card {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.05);
    padding: 30px;
    border-radius: 16px;
    transition: transform 0.3s, background 0.3s;
    
    &:hover {
      transform: translateY(-5px);
      background: rgba(255, 255, 255, 0.06);
    }

    .icon-box {
      width: 50px;
      height: 50px;
      margin-bottom: 20px;
      color: #409eff;
    }

    h3 {
      font-size: 1.5rem;
      margin-bottom: 12px;
    }

    p {
      color: #8b949e;
      line-height: 1.6;
      margin-bottom: 20px;
    }

    .price {
      font-weight: 700;
      color: #67c23a;
      font-size: 1.1rem;
    }
  }
}

.portfolio-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 40px;

  .project-card {
    background: #161b22;
    border-radius: 16px;
    overflow: hidden;
    border: 1px solid rgba(255, 255, 255, 0.05);

    .project-preview {
      height: 200px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .project-info {
      padding: 24px;

      h3 {
        font-size: 1.25rem;
        margin-bottom: 8px;
      }

      p {
        color: #8b949e;
        margin-bottom: 16px;
        font-size: 0.9rem;
      }

      .tags {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }
    }
  }
}

.contact-container {
  display: grid;
  grid-template-columns: 1fr;
  gap: 40px;
  @media (min-width: 900px) {
    grid-template-columns: 1fr 1fr;
  }

  .contact-info {
    padding: 20px;
  }

  .contact-form-card {
    background: rgba(255, 255, 255, 0.03);
    padding: 30px;
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.05);

    h3 {
      margin-bottom: 24px;
    }
  }
}

.footer {
  text-align: center;
  padding: 40px;
  color: #484f58;
  border-top: 1px solid rgba(255, 255, 255, 0.05);
}

/* Element Plus Overrides */
:deep(.el-input__wrapper), :deep(.el-textarea__inner) {
  background-color: rgba(255,255,255,0.05);
  box-shadow: none;
  color: white;
}
:deep(.el-form-item__label) {
  color: #8b949e;
}
</style>
